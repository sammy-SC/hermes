(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{45:function(e,n,a){"use strict";a.r(n),a.d(n,"frontMatter",function(){return l}),a.d(n,"rightToc",function(){return c}),a.d(n,"default",function(){return d});a(0);var i=a(80);function t(){return(t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function r(e,n){if(null==e)return{};var a,i,t=function(e,n){if(null==e)return{};var a,i,t={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var l={id:"building-and-running",title:"Building and Running Hermes"},c=[{value:"Dependencies",id:"dependencies",children:[]},{value:"Building on Linux and macOS",id:"building-on-linux-and-macos",children:[]},{value:"Building on Windows",id:"building-on-windows",children:[]},{value:"Running Hermes",id:"running-hermes",children:[{value:"Executing JavaScript with Hermes",id:"executing-javascript-with-hermes",children:[]}]},{value:"Compiling and Executing JavaScript with Bytecode",id:"compiling-and-executing-javascript-with-bytecode",children:[]},{value:"Running Tests",id:"running-tests",children:[]},{value:"Release Build",id:"release-build",children:[{value:"Other Tools",id:"other-tools",children:[]}]}],b={rightToc:c},s="wrapper";function d(e){var n=e.components,a=r(e,["components"]);return Object(i.b)(s,t({},b,a,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"This document describes how to build and run Hermes as a standalone compiler and VM. To use Hermes in the context of a React Native app, see the ",Object(i.b)("a",t({parentName:"p"},{href:"https://facebook.github.io/react-native/docs/getting-started"}),"React Native")," documentation."),Object(i.b)("h2",null,Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"dependencies"})),Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#dependencies"}),"#"),"Dependencies"),Object(i.b)("p",null,"Hermes is a C++11 project. clang, gcc, and Visual C++ are supported. Hermes also requires cmake, git, ICU, Python, and zip. It builds with ",Object(i.b)("a",t({parentName:"p"},{href:"https://cmake.org"}),"CMake")," and ",Object(i.b)("a",t({parentName:"p"},{href:"https://ninja-build.org"}),"ninja"),"."),Object(i.b)("p",null,"The Hermes REPL will also use libreadline, if available."),Object(i.b)("p",null,"To install dependencies on Ubuntu:"),Object(i.b)("pre",null,Object(i.b)("code",t({parentName:"pre"},{}),"apt install cmake git ninja-build libicu-dev Python zip libreadline-dev\n")),Object(i.b)("p",null,"On Mac via Homebrew:"),Object(i.b)("pre",null,Object(i.b)("code",t({parentName:"pre"},{}),"brew install cmake git ninja\n")),Object(i.b)("h2",null,Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"building-on-linux-and-macos"})),Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#building-on-linux-and-macos"}),"#"),"Building on Linux and macOS"),Object(i.b)("p",null,"Hermes will place its build files in a directory given by the ",Object(i.b)("inlineCode",{parentName:"p"},"HERMES_WS_DIR")," environment variable. Note that Hermes will download and build LLVM as part of its own build."),Object(i.b)("p",null,"Create a base directory to work in, e.g. ~/workspace, and cd into it. Follow the steps below to build LLVM and generate the Hermes build system:"),Object(i.b)("pre",null,Object(i.b)("code",t({parentName:"pre"},{}),'export HERMES_WS_DIR="$PWD"\ngit clone git@github.com:facebook/hermes.git\nhermes/utils/build_llvm.py\nhermes/utils/configure.sh\n')),Object(i.b)("p",null,"The build system has now been generated in the ",Object(i.b)("inlineCode",{parentName:"p"},"build")," directory. To perform the build:"),Object(i.b)("pre",null,Object(i.b)("code",t({parentName:"pre"},{}),"cd build && ninja\n")),Object(i.b)("h2",null,Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"building-on-windows"})),Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#building-on-windows"}),"#"),"Building on Windows"),Object(i.b)("p",null,"The Windows build depends on which particular combination of GitBash/Cygwin/WSL and Visual Studio is used."),Object(i.b)("pre",null,Object(i.b)("code",t({parentName:"pre"},{}),"export HERMES_WS_DIR='c:/ws'\ncd \"$HERMES_WS_DIR\"\ngit -c core.autocrlf=false clone git@github.com:facebook/hermes.git\nBUILD_SYSTEM='Visual Studio 16 2019' CMAKE_FLAGS='-A x64' DISTRIBUTE=1 hermes/utils/build_llvm.py\nCMAKE_FLAGS='-A x64 -DLLVM_ENABLE_LTO=OFF' DISTRIBUTE=1 hermes/utils/configure.sh 'Visual Studio 16 2019'\ncd build_release && MSBuild.exe ALL_BUILD.vcxproj /p:Configuration=Release\n")),Object(i.b)("h2",null,Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"running-hermes"})),Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#running-hermes"}),"#"),"Running Hermes"),Object(i.b)("p",null,"The primary binary is the ",Object(i.b)("inlineCode",{parentName:"p"},"hermes")," tool, which will be found at ",Object(i.b)("inlineCode",{parentName:"p"},"build/bin/hermes"),". This tool compiles JavaScript to Hermes bytecode. It can also execute JavaScript, from source or bytecode."),Object(i.b)("h3",null,Object(i.b)("a",t({parentName:"h3"},{"aria-hidden":!0,className:"anchor",id:"executing-javascript-with-hermes"})),Object(i.b)("a",t({parentName:"h3"},{"aria-hidden":!0,className:"hash-link",href:"#executing-javascript-with-hermes"}),"#"),"Executing JavaScript with Hermes"),Object(i.b)("pre",null,Object(i.b)("code",t({parentName:"pre"},{}),"hermes test.js\n")),Object(i.b)("h2",null,Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"compiling-and-executing-javascript-with-bytecode"})),Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#compiling-and-executing-javascript-with-bytecode"}),"#"),"Compiling and Executing JavaScript with Bytecode"),Object(i.b)("pre",null,Object(i.b)("code",t({parentName:"pre"},{}),"hermes -emit-binary -out test.hbc test.js\nhermes test.hbc\n")),Object(i.b)("h2",null,Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"running-tests"})),Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#running-tests"}),"#"),"Running Tests"),Object(i.b)("p",null,"To run the Hermes test suite:"),Object(i.b)("pre",null,Object(i.b)("code",t({parentName:"pre"},{}),"ninja check-hermes\n")),Object(i.b)("h2",null,Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"anchor",id:"release-build"})),Object(i.b)("a",t({parentName:"h2"},{"aria-hidden":!0,className:"hash-link",href:"#release-build"}),"#"),"Release Build"),Object(i.b)("p",null,"The above instructions create an unoptimized debug build. The ",Object(i.b)("inlineCode",{parentName:"p"},"DISTRIBUTE=1")," environment variable will enable a release build, in the ",Object(i.b)("inlineCode",{parentName:"p"},"build_release")," directory. Example:"),Object(i.b)("pre",null,Object(i.b)("code",t({parentName:"pre"},{}),"env DISTRIBUTE=1 hermes/utils/build_llvm.py\nenv DISTRIBUTE=1 hermes/utils/configure.sh\ncd build_release && ninja\n")),Object(i.b)("h3",null,Object(i.b)("a",t({parentName:"h3"},{"aria-hidden":!0,className:"anchor",id:"other-tools"})),Object(i.b)("a",t({parentName:"h3"},{"aria-hidden":!0,className:"hash-link",href:"#other-tools"}),"#"),"Other Tools"),Object(i.b)("p",null,"In addition to ",Object(i.b)("inlineCode",{parentName:"p"},"hermes"),", the following tools will be built:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"hdb"),": JavaScript command line debugger"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"hermes-repl"),": JavaScript interactive REPL"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"hbcdump"),": Hermes bytecode disassembler"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"hermesc"),": Standalone Hermes compiler. This can compile JavaScript to Hermes bytecode, but does not support executing it."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"hvm"),": Standalone Hermes VM. This can execute Hermes bytecode, but does not support compiling it.")))}d.isMDXComponent=!0}}]);